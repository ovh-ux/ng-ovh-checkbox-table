/*! ovh-angular-checkbox-table - 0.1.2 - 2018-08-02 */
angular.module("ovh-angular-checkbox-table",[]),angular.module("ovh-angular-checkbox-table").directive("ovhCheckboxTable",["$timeout",function(a){"use strict";return{restrict:"A",scope:{idsAll:"=ovhCheckboxTableIdsAll",idsPage:"=ovhCheckboxTableIdsPage",idsSelected:"=ovhCheckboxTableIdsSelected",id:"@ovhCheckboxTableId"},link:function(b,c){function d(){e(b.idsAll&&b.idsAll.length&&b.idsAll.length===Object.keys(b.idsSelected).length?2:b.idsAll&&b.idsAll.length&&Object.keys(b.idsSelected).length>0?1:0)}function e(d){b.state=d,a(function(){c.prop({checked:2===d,indeterminate:1===d})})}function f(a){angular.forEach(a,function(a){b.idsSelected[angular.isDefined(b.id)?a[b.id]:a]=!0})}b.$watch("idsAll",function(){!angular.isUndefined(b.idsAll)&&angular.isArray(b.idsAll)&&(b.idsSelected={},d())}),b.$watch("idsSelected",function(){b.idsSelected=_.omit(b.idsSelected,function(a){return!a}),d()},!0),b.state=0,c.bind("click touchend",function(a){if(a.preventDefault(),2===b.state)e(0),b.idsSelected={};else{var c=!0;angular.forEach(b.idsPage,function(a){c=c&&(angular.isDefined(b.id)?b.idsSelected[a[b.id]]:b.idsSelected[a])===!0}),f(c?b.idsAll:b.idsPage),d()}})}}}]);